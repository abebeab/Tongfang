<!-- ================= TOPBAR START ================= -->
<div class="container-fluid bg-dark px-0">
    <div class="row g-0 d-none d-lg-flex align-items-center">
        <div class="col-lg-6 ps-5 text-start">
            <div class="h-100 d-inline-flex align-items-center text-white topbar-left">
                <span class="small uppercase fw-bold" style="letter-spacing: 1px; font-size:28px;">Tongfang BMS System Integration</span>
            </div>
        </div>
        <div class="col-lg-6 text-end">
            <div class="h-100 topbar-right d-inline-flex align-items-center text-white py-2 px-5">
                <span class="fs-6 fw-bold me-2">
                    <i class="fa fa-phone-alt me-2 text-primary"></i>Technical Support:
                </span>
                <span class="fs-6 fw-bold">+251 9 11249722</span>
            </div>
        </div>
    </div>
</div>
<!-- ================= TOPBAR END ================= -->

<!-- ================= NAVBAR START ================= -->
<nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top shadow-sm py-0 pe-lg-5">

    <!-- Brand -->
    <a href="/home/index.html" class="navbar-brand ps-5 me-0">
        <h1 class="m-0 text-primary fw-bold" style="letter-spacing: -1px;">TONGFANG <span class="text-dark">BMS</span></h1>
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler me-4" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Content -->
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-2 p-lg-0">

            <!-- HOME -->
            <a href="/home/index.html" class="nav-item nav-link">Home</a>

            <!-- ABOUT -->
            <div class="nav-item dropdown">
                <a href="/about/index.html" class="nav-link dropdown-toggle">About</a>
                <div class="dropdown-menu bg-light border-0 shadow-sm">
                    <a href="/about/index.html" class="dropdown-item">Company Overview</a>
                    <a href="/about/testimonials.html" class="dropdown-item">Testimonials</a>
                    <a href="/about/certificates.html" class="dropdown-item">Certificates & Standards</a>
                </div>
            </div>

            <!-- SOLUTIONS MEGA MENU -->
            <div class="nav-item dropdown mega-dropdown">
                <!-- Removed data-bs-toggle to allow redirection like the Products link -->
                <a href="/solutions/index.html" class="nav-link dropdown-toggle active">Solutions</a>

                <div class="dropdown-menu mega-menu-content border-0 shadow-sm p-4">
                    <div class="container-fluid">
                        <div class="row g-4">

                            <!-- Scenario-Based Solutions -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Scenario Solutions</h6>
                                <div class="list-group list-group-flush">
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-scenario/smart-campus-hub/index.html">Smart Campus Hub</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/smart-hospital-access/index.html">Smart Hospital Access</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-scenario/integrated-campus/index.html">Integrated Campus</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-scenario/smart-park-control/index.html">Smart Park Control</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/parking-lots/index.html">Public Facility Control</a>
                                </div>
                            </div>

                            <!-- Industry-Based Solutions -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Industry Solutions</h6>
                                <div class="list-group list-group-flush">
                                    <a class="list-group-item list-group-item-action" href="/solutions/hotel-smart-security/index.html">Hotel Smart Security</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/sports-center-automation/index.html">Sports Center Automation</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-industry/stadium-gym-management/index.html">Stadium & Gym Management</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-industry/medical-facility-solution/index.html">Medical Facility Smart Solution</a>
                                </div>
                            </div>

                            <!-- Functional Solutions -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Functional Solutions</h6>
                                <div class="list-group list-group-flush mega-scrollable">
                                    <div class="fw-bold mb-1 small text-muted">Building & Energy</div>
                                    <a class="list-group-item list-group-item-action" href="/solutions/index.html">Building Management System</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/energy-carbon-optimization/index.html">Energy & Carbon Optimization</a>

                                    <div class="fw-bold mt-3 mb-1 small text-muted">Automation</div>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-function/hotel-automation/index.html">Hotel Automation</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-function/campus-automation/index.html">Campus Automation</a>

                                    <div class="fw-bold mt-3 mb-1 small text-muted">Smart Platforms</div>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-function/smart-park-platform/index.html">Smart Park Platform</a>
                                    <a class="list-group-item list-group-item-action" href="/solutions/smart-port-platform/index.html">Smart Port Platform</a>
                                    <a class="list-group-item list-group-item-action" href="/">Park Management System</a>

                                    <div class="fw-bold mt-3 mb-1 small text-muted">Network</div>
                                    <a class="list-group-item list-group-item-action" href="/solutions/by-function/medical-network-solution/index.html">Medical Network Solution</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- PRODUCTS MEGA MENU -->
            <div class="nav-item dropdown mega-dropdown">
                <a href="/products/index.html" class="nav-link dropdown-toggle">Products</a>
                <div class="dropdown-menu mega-menu-content border-0 shadow-sm p-3">
                    <div class="container-fluid">
                        <div class="row g-4">

                            <!-- Layer 1: Integration -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Layer 01: Integration</h6>
                                <div class="list-group list-group-flush">
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/hmi-software/index.html">HMI & Platforms</a>
                                    <p class="small text-muted px-3 mb-2">ESCloud, WEBtalk-100, EMS-500</p>
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/bas-control/index.html">BAS Control Engines</a>
                                    <p class="small text-muted px-3 mb-0">BCU Series & BR Routers</p>
                                </div>
                            </div>

                            <!-- Layer 2: Field Control -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Layer 02: Field Control</h6>
                                <div class="list-group list-group-flush">
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/field-controllers/index.html">Field DDC Controllers</a>
                                    <p class="small text-muted px-3 mb-2">BLC Series Terminal Nodes</p>
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/lighting-control/index.html">Lighting Management</a>
                                    <p class="small text-muted px-3 mb-2">BCX Series Dimming</p>
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/energy-metering/index.html">EMC Utility Gateways</a>
                                </div>
                            </div>

                            <!-- Layer 3: Tail End & IoT -->
                            <div class="col-lg-4">
                                <h6 class="fw-bold text-primary border-bottom pb-2">Layer 03: Tail End</h6>
                                <div class="list-group list-group-flush mega-scrollable">
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/wireless-iot/index.html">Wireless Series (ZigBee)</a>
                                    <a class="list-group-item list-group-item-action fw-bold" href="/products/sensors-devices/index.html">Technical Sensor Nodes</a>
                                    <div class="dropdown-divider mt-3"></div>
                                    <a class="list-group-item list-group-item-action fw-bold text-dark" href="/products/index.html">
                                        <i class="fa fa-sitemap me-2 text-primary"></i>Product Architecture Map
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- CONTACT -->
            <a href="/contact/index.html" class="nav-item nav-link">Contact</a>

            <!-- Technologies (Mobile) -->
            <a href="/technologies/index.html" class="nav-item nav-link d-lg-none">Technologies</a>
        </div>

        <!-- Technologies (Desktop Button) -->
        <a href="/technologies/index.html" class="btn btn-primary px-4 d-none d-lg-block" style="border-radius: 0;">Technologies</a>
    </div>
</nav>
<!-- ================= NAVBAR END ================= -->

<!-- ================= STYLES & UX IMPROVEMENTS ================= -->
<style>
.topbar-left span { font-weight: 600; letter-spacing: 1px; }
.navbar .dropdown:hover > .dropdown-menu { display: block; margin-top: 0; animation: fadeIn 0.3s ease-in-out; }
.mega-scrollable { max-height: 350px; overflow-y: auto; overflow-x: hidden; }
.mega-menu-content .list-group-item:hover { background-color: #f0f8ff; color: #FF5E14; font-weight: 600; padding-left: 20px; transition: 0.3s; }

@media (max-width: 992px) {
    .mega-scrollable { max-height: none; }
    .mega-dropdown .dropdown-menu { padding: 0; }
    .mega-dropdown .list-group-item { border: none; }
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
</style>

<script>
/**
 * REDIRECTION LOGIC
 * This ensures that clicking a parent link (Solutions, Products, About) 
 * actually takes you to that page on Desktop.
 */
document.addEventListener('DOMContentLoaded', function() {
    // 1. Desktop Click-to-Redirect Logic
    if (window.innerWidth >= 992) {
        const parentLinks = document.querySelectorAll('.nav-item.dropdown > a.nav-link');
        parentLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const url = this.getAttribute('href');
                if (url && url !== "#") {
                    window.location.href = url;
                }
            });
        });
    }

    // 2. Mobile Accordion Logic (Optional enhancement for usability)
    if (window.innerWidth < 992) {
        const headers = document.querySelectorAll('.mega-menu-content h6');
        headers.forEach(h => {
            h.style.cursor = 'pointer';
            const list = h.nextElementSibling;
            if(list) list.style.display = 'none';
            h.addEventListener('click', () => {
                list.style.display = list.style.display === 'none' ? 'block' : 'none';
            });
        });
    }
});
</script>